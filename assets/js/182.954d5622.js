(window.webpackJsonp=window.webpackJsonp||[]).push([[182],{587:function(s,t,a){"use strict";a.r(t);var e=a(56),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"kafka-集群搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kafka-集群搭建"}},[s._v("#")]),s._v(" Kafka 集群搭建")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/995ba2069cba4fbba92d9a250b1471df.png",alt:"在这里插入图片描述"}})]),s._v(" "),a("h2",{attrs:{id:"安装基础环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装基础环境"}},[s._v("#")]),s._v(" 安装基础环境")]),s._v(" "),a("p",[s._v("我们用虚拟机创建出3台机器，修改主机名为s1，s2和s3")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开如下文件，修改主机名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/hostname\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启机器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])])]),a("p",[s._v("查看centos版本为7.9")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@s1 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/centos-release")]),s._v("\nCentOS Linux release "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.9")]),s._v(".2009 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("AltArch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("下载相关命令")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" vim*\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" net-tools\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v("\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v("\n")])])]),a("p",[s._v("执行ifconfig命令获取ip地址")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("hostname")]),s._v(" "),a("th",[s._v("ip")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("s1")]),s._v(" "),a("td",[s._v("192.168.9.128")])]),s._v(" "),a("tr",[a("td",[s._v("s2")]),s._v(" "),a("td",[s._v("192.168.9.129")])]),s._v(" "),a("tr",[a("td",[s._v("s3")]),s._v(" "),a("td",[s._v("192.168.9.130")])])])]),s._v(" "),a("p",[s._v("在3台服务器上配置host，添加如下内容\nvim /etc/hosts")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".9.128 s1\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".9.129 s2\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".9.130 s3\n")])])]),a("p",[s._v("我们配置一下server-1到server-2和server-3的ssh登陆")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在3台机器执行如下命令")]),s._v("\nssh-keygen -t rsa\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看server-1的公钥")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.ssh/id_rsa.pub\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将server-1的公钥放到server-1，server-2和server-3的如下文件中")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ~/.ssh/authorized_keys\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在server-1执行如下命令能正常调转则说明成功")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@s1\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@s2\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@s3\n")])])]),a("p",[s._v("在镜像网站下载jdk\nhttps://repo.huaweicloud.com/java/jdk/8u151-b12/")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/opt/soft/jdk1.8.0_151\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CLASSPATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/jre/lib/ext:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib/tools.jar\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v(" JAVA_HOME CLASSPATH\n")])])]),a("p",[s._v("重新加载profile，显示版本号则安装成功")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\njava -version\n")])])]),a("p",[s._v("将jdk分发到其他节点，并配置环境变量")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /etc/profile s2:/etc/profile\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /etc/profile s3:/etc/profile\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /root/opt/soft/jdk1.8.0_151 s2:/root/opt/soft/jdk1.8.0_151\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /root/opt/soft/jdk1.8.0_151 s3:/root/opt/soft/jdk1.8.0_151\n")])])]),a("h2",{attrs:{id:"搭建zookeeper集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建zookeeper集群"}},[s._v("#")]),s._v(" 搭建Zookeeper集群")]),s._v(" "),a("p",[s._v("下载zookeeper-3.8.1")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://archive.apache.org/dist/zookeeper/zookeeper-3.8.1/apache-zookeeper-3.8.1-bin.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf apache-zookeeper-3.8.1-bin.tar.gz\n")])])]),a("p",[s._v("修改配置文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" zoo_sample.cfg zoo.cfg\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" zoo.cfg\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加如下内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 格式为 hostname:连接leader端口:leader选举端口")]),s._v("\nserver.1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("s1:2188:2888\nserver.2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("s2:2188:2888\nserver.3"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("s3:2188:2888\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改dataDir")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dataDir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/opt/soft/apache-zookeeper-3.8.1-bin/data\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在dataDir目录新建myid文件，s1服务器上myid内容为1，s2服务器上myid内容为2，以此类推")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" myid\n")])])]),a("p",[s._v("将zookeeper目录分发到其他节点")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /root/opt/soft/apache-zookeeper-3.8.1-bin s2:/root/opt/soft/apache-zookeeper-3.8.1-bin\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /root/opt/soft/apache-zookeeper-3.8.1-bin s3:/root/opt/soft/apache-zookeeper-3.8.1-bin\n")])])]),a("p",[s._v("修改s2服务器上myid文件中的的值为2，s3服务器上myid文件中的的值为3")]),s._v(" "),a("h2",{attrs:{id:"编写启动脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写启动脚本"}},[s._v("#")]),s._v(" 编写启动脚本")]),s._v(" "),a("p",[s._v("服务端脚本命令格式如下")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("zkServer.sh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("start"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("start-foreground"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("stop"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("status"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("upgrade"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("print-cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("./zkServer.sh start")]),s._v(" "),a("td",[s._v("启动ZooKeeper")])]),s._v(" "),a("tr",[a("td",[s._v("./zkServer.sh status")]),s._v(" "),a("td",[s._v("查看ZooKeeper运行状态")])]),s._v(" "),a("tr",[a("td",[s._v("./zkServer.sh stop")]),s._v(" "),a("td",[s._v("关闭ZooKeeper")])])])]),s._v(" "),a("p",[s._v("通过客户端脚本连接到ZooKeeper服务端")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("zkCli.sh -server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:2181\n")])])]),a("p",[s._v("为了方便启动和关闭集群，写一个脚本zk.sh")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" s1 s2 s3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -------------------------------- "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" zookeeper 启动 ---------------------------\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/opt/soft/apache-zookeeper-3.8.1-bin/bin/zkServer.sh start"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stop"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" s1 s2 s3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -------------------------------- "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" zookeeper 停止 ---------------------------\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/opt/soft/apache-zookeeper-3.8.1-bin/bin/zkServer.sh stop"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" s1 s2 s3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -------------------------------- "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" zookeeper 状态 ---------------------------\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/opt/soft/apache-zookeeper-3.8.1-bin/bin/zkServer.sh status"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存退出后，修改zk.sh脚本执行权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u+x zk.sh\n")])])]),a("p",[s._v("执行这个脚本报错了，需要在zkEnv.sh的第一行指定一下JAVA_HOME（3个服务器都需要）")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# '--config' option in the command line.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/opt/soft/jdk1.8.0_151\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZOOBINDIR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ZOOBINDIR"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZOOKEEPER_PREFIX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ZOOBINDIR}")]),s._v('/.."')]),s._v("\n")])])]),a("p",[s._v("同步一下")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /root/opt/soft/apache-zookeeper-3.8.1-bin/bin/zkEnv.sh s2:/root/opt/soft/apache-zookeeper-3.8.1-bin/bin/zkEnv.sh\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /root/opt/soft/apache-zookeeper-3.8.1-bin/bin/zkEnv.sh s3:/root/opt/soft/apache-zookeeper-3.8.1-bin/bin/zkEnv.sh\n")])])]),a("p",[s._v("执行 zk.sh start 都正常启动了，但是执行zk.sh status 显示如下")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@server-1 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./zk.sh status")]),s._v("\n-------------------------------- s1 zookeeper 状态 ---------------------------\nZooKeeper JMX enabled by default\nUsing config: /root/opt/soft/apache-zookeeper-3.8.1-bin/bin/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/conf/zoo.cfg\nClient port found: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v(". Client address: localhost. Client SSL: false.\nError contacting service. It is probably not running.\n-------------------------------- s2 zookeeper 状态 ---------------------------\nZooKeeper JMX enabled by default\nUsing config: /root/opt/soft/apache-zookeeper-3.8.1-bin/bin/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/conf/zoo.cfg\nClient port found: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v(". Client address: localhost. Client SSL: false.\nError contacting service. It is probably not running.\n-------------------------------- s3 zookeeper 状态 ---------------------------\nZooKeeper JMX enabled by default\nUsing config: /root/opt/soft/apache-zookeeper-3.8.1-bin/bin/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/conf/zoo.cfg\nClient port found: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v(". Client address: localhost. Client SSL: false.\nError contacting service. It is probably not running.\n")])])]),a("p",[s._v("到logs文件夹下查看日志如下")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Cannot "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" channel to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" at election address s3/192.168.9.130:2888\n")])])]),a("p",[s._v("关闭防火墙即可")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 临时关闭")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl stop firewalld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后reboot 永久关闭")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl disable firewalld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看防火墙状态。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl status firewalld\n")])])]),a("p",[s._v("执行./zk.sh status结果如下，表明集群启动成功")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@server-1 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./zk.sh status")]),s._v("\n-------------------------------- s1 zookeeper 状态 ---------------------------\nZooKeeper JMX enabled by default\nUsing config: /root/opt/soft/apache-zookeeper-3.8.1-bin/bin/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/conf/zoo.cfg\nClient port found: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v(". Client address: localhost. Client SSL: false.\nMode: follower\n-------------------------------- s2 zookeeper 状态 ---------------------------\nZooKeeper JMX enabled by default\nUsing config: /root/opt/soft/apache-zookeeper-3.8.1-bin/bin/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/conf/zoo.cfg\nClient port found: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v(". Client address: localhost. Client SSL: false.\nMode: leader\n-------------------------------- s3 zookeeper 状态 ---------------------------\nZooKeeper JMX enabled by default\nUsing config: /root/opt/soft/apache-zookeeper-3.8.1-bin/bin/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/conf/zoo.cfg\nClient port found: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v(". Client address: localhost. Client SSL: false.\nMode: follower\n")])])]),a("h2",{attrs:{id:"搭建kafka集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建kafka集群"}},[s._v("#")]),s._v(" 搭建Kafka集群")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://archive.apache.org/dist/kafka/0.11.0.3/kafka_2.11-0.11.0.3.tgz\n")])])]),a("p",[s._v("进入config目录，修改server.properties文件中的如下参数\n/root/opt/soft/kafka_2.11-0.11.0.3/config/server.properties")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改如下参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# broker.id ： 集群内全局唯一标识，每个节点上需要设置不同的值")]),s._v("\nbroker.id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以删除topic")]),s._v("\ndelete.topic.enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# listeners：这个IP地址也是与本机相关的，每个节点上设置为自己的IP地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("listeners")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PLAINTEXT://s1:9092\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# log.dirs ：存放kafka消息的")]),s._v("\nlog.dirs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/opt/soft/kafka_2.11-0.11.0.3/data\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# zookeeper.connect ： 配置的是zookeeper集群地址")]),s._v("\nzookeeper.connect"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("s1:2181,s2:2181,s3:2181\n")])])]),a("p",[s._v("分发kafka目录到其他节点")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /root/opt/soft/kafka_2.11-0.11.0.3 s2:/root/opt/soft/kafka_2.11-0.11.0.3\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /root/opt/soft/kafka_2.11-0.11.0.3 s3:/root/opt/soft/kafka_2.11-0.11.0.3\n")])])]),a("p",[s._v("分发完成后，其他集群节点都需要修改配置文件server.properties中的 broker.id 和listeners 参数")]),s._v(" "),a("p",[s._v("编写集群操作脚本")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" s1 s2 s3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -------------------------------- "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" kafka 启动 ---------------------------\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source /etc/profile && /root/opt/soft/kafka_2.11-0.11.0.3/bin/kafka-server-start.sh -daemon /root/opt/soft/kafka_2.11-0.11.0.3/config/server.properties"')]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stop"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" s1 s2 s3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -------------------------------- "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" kafka 停止 ---------------------------\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/opt/soft/kafka_2.11-0.11.0.3/bin/kafka-server-stop.sh"')]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])])]),a("p",[s._v("增加操作权限")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u+x kafka.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动kafka集群")]),s._v("\n./kafka.sh start\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭kafka集群")]),s._v("\n./kafka.sh stop\n")])])]),a("p",[s._v("测试集群是否正常搭建")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建topic 副本数为3 分区数位3")]),s._v("\n./kafka-topics.sh --create --zookeeper s1:2181 --replication-factor "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" --partitions "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" --topic "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看topic")]),s._v("\n./kafka-topics.sh --list --zookeeper s1:2181\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除topic")]),s._v("\n./kafka-topics.sh --delete --zookeeper s1:2181 --topic "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动生产者控制台")]),s._v("\n./kafka-console-producer.sh --broker-list s1:9092 --topic "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动消费者控制台")]),s._v("\n./kafka-console-consumer.sh --bootstrap-server s1:9092 --topic "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" --from-beginning\n")])])]),a("p",[s._v("在生产者控制台输入hello world，在消费者控制台输出hello world，则表明kafka搭建成功")]),s._v(" "),a("h2",{attrs:{id:"搭建kafka图形界面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建kafka图形界面"}},[s._v("#")]),s._v(" 搭建Kafka图形界面")]),s._v(" "),a("p",[s._v("https://www.kafka-eagle.org/")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/smartloli/kafka-eagle-bin/archive/v3.0.1.tar.gz\n")])])]),a("p",[s._v("配置环境变量\nvim /etc/profile")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KE_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/opt/soft/kafka-eagle-bin-3.0.1/efak-web-3.0.1\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KE_HOME")]),s._v("/bin\n")])])]),a("p",[s._v("修改system-config.properties文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 去掉cluster2，监控一个集群就行了")]),s._v("\nefak.zk.cluster.alias"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cluster1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改zookeeper地址")]),s._v("\ncluster1.zk.list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("s1:2181,s2:2181,s3:2181\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cluster2.zk.list=xdn10:2181,xdn11:2181,xdn12:2181")]),s._v("\n\ncluster1.efak.offset.storage"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kafka\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注释调用如下一句")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cluster2.efak.offset.storage=zk")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 放开sqllite的连接方式，并修改url地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("######################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kafka sqlite jdbc driver address")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("######################################")]),s._v("\nefak.driver"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.sqlite.JDBC\nefak.url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jdbc:sqlite:/root/opt/soft/kafka-eagle-bin-3.0.1/efak-web-3.0.1/db/ke.db\nefak.username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\nefak.password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("www.kafka-eagle.org\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注释调mysql的连接方式")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("######################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kafka mysql jdbc driver address")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("######################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#efak.driver=com.mysql.cj.jdbc.Driver")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#efak.url=jdbc:mysql://127.0.0.1:3306/ke?useUnicode=true&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#efak.username=root")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#efak.password=123456")]),s._v("\n")])])]),a("p",[s._v("执行如下命令启动")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("./ke.sh start\n")])])]),a("p",[s._v("访问http://192.168.9.128:8048/，输入用户名：admin，密码：123456即可")]),s._v(" "),a("p",[s._v("发现启动失败，原来是要连接kafka的JMX")]),s._v(" "),a("p",[s._v('在kafka-server-start.sh中加上export JMX_PORT="9999"，分发到各个节点，然后重启即可\n'),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/283ae29f8c53443ebd5e60f8ebd6bf56.png",alt:"在这里插入图片描述"}})]),s._v(" "),a("h2",{attrs:{id:"备注"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#备注"}},[s._v("#")]),s._v(" 备注")]),s._v(" "),a("p",[s._v("我在本地mac上启动代码调试时报了如下一个错误，拉取不到元数据，搜了一下是因为本地hosts文件没有配置域名映射的关系")]),s._v(" "),a("p",[s._v("org.apache.kafka.common.errors.TimeoutException: Failed to update metadata after 60000 ms")]),s._v(" "),a("p",[s._v("因为我们上面的server.properties文件中listeners配置如下")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# listeners：这个IP地址也是与本机相关的，每个节点上设置为自己的IP地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("listeners")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PLAINTEXT://s1:9092\n")])])]),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/cb4a72af654a43cfa806dce550f0ab25.png",alt:"在这里插入图片描述"}}),s._v("\n上传到zk上为s3:9092，如果本地不配置域名映射，那么客户端就不知道连接哪台服务器")]),s._v(" "),a("p",[s._v("vim /etc/hosts")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".9.128 s1\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".9.129 s2\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".9.130 s3\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);